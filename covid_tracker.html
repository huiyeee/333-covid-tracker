<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="./style.css" rel="stylesheet" />
  </head>
  <body>
    <h1>US COVID TRACKER</h1>
    <section>
        <svg class="covid-history"></svg> 
    </section>
    <section>
        <svg class="us-map"></svg> 
    </section>
    <section>
        <svg class="covid-trend"></svg> 
    </section>

    <script>

    // Global variable for all data
    let us_data, states_data;
    d3.csv("./data/us.csv").then((d) => {
        us_data = d;
        console.log(us_data);
        createCovidHistory(".covid-history");
    });
    d3.csv("./data/us-states.csv").then((d) => {
        states_data = d;
        console.log(states_data);
    })

    // Create Covid spread history 
    const createCovidHistory = (svgSelector) => {
        const margin = { top: 40, bottom: 10, left: 120, right: 20 };
        const width = 800 - margin.left - margin.right;
        const height = 600 - margin.top - margin.bottom;

        const svg = d3
        .selectAll(svgSelector)
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom);

        // Group used to enforce margin
        const g = svg.append("g").attr("transform", `translate(${margin.left},${margin.top})`);
    }

    </script>
  </body>
</html>
